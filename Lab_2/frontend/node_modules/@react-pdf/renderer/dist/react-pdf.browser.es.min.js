import t from"@babel/runtime/helpers/inheritsLoose";import e from"@babel/runtime/helpers/objectWithoutPropertiesLoose";import r from"@babel/runtime/helpers/extends";import n,{Fragment as i}from"react";import o from"@babel/runtime/regenerator";import a from"@babel/runtime/helpers/asyncToGenerator";import s from"blob-stream";import h from"react-reconciler";import u from"@babel/runtime/helpers/createClass";import c,{PDFFont as l}from"@react-pdf/pdfkit";import d from"yoga-layout-prebuilt";import f from"lodash.pick";import p from"lodash.merge";import g from"lodash.topairsin";import m from"lodash.isfunction";import y from"media-engine";import v from"@babel/runtime/helpers/assertThisInitialized";import b from"@textkit/pdf-renderer";import T from"is-url";import w from"cross-fetch";import x from"@react-pdf/fontkit";import{LayoutEngine as E,Attachment as k,AttributedString as C,Rect as R,Path as S,Container as P}from"@react-pdf/textkit-core";import A from"@react-pdf/script-itemizer";import L from"@textkit/justification-engine";import B from"@textkit/text-decoration-engine";import M from"emoji-regex";import O from"@react-pdf/png-js";import D from"page-wrapping";var I="production"!==process.env.NODE_ENV?function(t,e){if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];(function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=0,o="Warning: "+t.replace(/%s/g,function(){return r[i++]});"undefined"!=typeof console&&console.error(o);try{throw new Error(o)}catch(t){}}).apply(void 0,[e].concat(n))}}:function(){},_=function(){function t(){this.isDirty=!1,this.document=null,this.instance=null}var e=t.prototype;return e.appendChild=function(t){this.document=t},e.removeChild=function(){this.document=null},e.markDirty=function(){this.isDirty=!0},e.render=function(){var t=a(o.mark(function t(){return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.instance=new c({autoFirstPage:!1}),t.next=3,this.document.render();case 3:this.isDirty=!1;case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),u(t,[{key:"name",get:function(){return"Root"}}]),t}(),W=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},z=function(t){var e=function(t){return/((-)?\d+\.?\d*)%/g.exec(t)}(t);if(e){var r=parseFloat(e[1],10),n=r/100;return{value:r,percent:n,absValue:Math.abs(r),absPercent:Math.abs(n)}}return null},N=function(){function t(){this.parent=null,this.children=[],this.computed=!1,this.layout=d.Node.createDefault()}var e=t.prototype;return e.appendChild=function(t){t&&(t.parent=this,this.children.push(t),this.layout.insertChild(t.layout,this.layout.getChildCount()))},e.appendChildBefore=function(t,e){var r=this.children.indexOf(e);-1!==r&&t&&(t.parent=this,this.children.splice(r,0,t),this.layout.insertChild(t.layout,r))},e.removeChild=function(t){var e=this.children.indexOf(t);-1!==e&&(t.parent=null,this.children.splice(e,1),this.layout.removeChild(t.layout))},e.removeAllChilds=function(){for(var t=[].concat(this.children),e=0;e<t.length;e++)t[e].remove()},e.remove=function(){this.parent.removeChild(this)},e.setDimension=function(t,e){var r="set"+W(t),n=r+"Percent",i=z(e);i?this.layout[n](i.value):this.layout[r](e)},e.setPosition=function(t,e){var r=z(e);r?this.layout.setPositionPercent(t,r.value):this.layout.setPosition(t,e)},e.setPadding=function(t,e){var r=z(e);r?this.layout.setPaddingPercent(t,r.value):this.layout.setPadding(t,e)},e.setMargin=function(t,e){var r=z(e);r?this.layout.setMarginPercent(t,r.value):this.layout.setMargin(t,e)},e.setBorder=function(t,e){if(z(e))throw new Error("Node: You cannot set percentage border widths");this.layout.setBorder(t,e)},e.getAbsoluteLayout=function(){var t=this.parent,e=t&&t.getAbsoluteLayout?t.getAbsoluteLayout():{left:0,top:0};return{left:this.left+e.left,top:this.top+e.top,height:this.height,width:this.width}},e.copyStyle=function(t){this.layout.copyStyle(t.layout)},e.calculateLayout=function(){this.layout.calculateLayout(),this.computed=!0},e.isEmpty=function(){return 0===this.children.length},e.markDirty=function(){return this.layout.markDirty()},e.onAppendDynamically=function(){},u(t,[{key:"position",get:function(){return this.layout.getPositionType()===d.POSITION_TYPE_ABSOLUTE?"absolute":"relative"},set:function(t){this.layout.setPositionType("absolute"===t?d.POSITION_TYPE_ABSOLUTE:d.POSITION_TYPE_RELATIVE)}},{key:"top",get:function(){return this.layout.getComputedTop()||0},set:function(t){this.setPosition(d.EDGE_TOP,t)}},{key:"left",get:function(){return this.layout.getComputedLeft()||0},set:function(t){this.setPosition(d.EDGE_LEFT,t)}},{key:"right",get:function(){return this.layout.getComputedRight()||0},set:function(t){this.setPosition(d.EDGE_RIGHT,t)}},{key:"bottom",get:function(){return this.layout.getComputedBottom()||0},set:function(t){this.setPosition(d.EDGE_BOTTOM,t)}},{key:"width",get:function(){return this.layout.getComputedWidth()},set:function(t){this.setDimension("width",t)}},{key:"minWidth",get:function(){return this.layout.getMinWidth().value},set:function(t){this.setDimension("minWidth",t)}},{key:"maxWidth",get:function(){return this.layout.getMaxWidth().value},set:function(t){this.setDimension("maxWidth",t)}},{key:"height",get:function(){return this.layout.getComputedHeight()},set:function(t){this.setDimension("height",t)}},{key:"minHeight",get:function(){return this.layout.getMinHeight().value},set:function(t){this.setDimension("minHeight",t)}},{key:"maxHeight",get:function(){return this.layout.getMaxHeight().value},set:function(t){this.setDimension("maxHeight",t)}},{key:"paddingTop",get:function(){return this.layout.getComputedPadding(d.EDGE_TOP)||0},set:function(t){this.setPadding(d.EDGE_TOP,t)}},{key:"paddingRight",get:function(){return this.layout.getComputedPadding(d.EDGE_RIGHT)||0},set:function(t){this.setPadding(d.EDGE_RIGHT,t)}},{key:"paddingBottom",get:function(){return this.layout.getComputedPadding(d.EDGE_BOTTOM)||0},set:function(t){this.setPadding(d.EDGE_BOTTOM,t)}},{key:"paddingLeft",get:function(){return this.layout.getComputedPadding(d.EDGE_LEFT)||0},set:function(t){this.setPadding(d.EDGE_LEFT,t)}},{key:"marginTop",get:function(){return this.layout.getComputedMargin(d.EDGE_TOP)||0},set:function(t){this.setMargin(d.EDGE_TOP,t)}},{key:"marginRight",get:function(){return this.layout.getComputedMargin(d.EDGE_RIGHT)||0},set:function(t){this.setMargin(d.EDGE_RIGHT,t)}},{key:"marginBottom",get:function(){return this.layout.getComputedMargin(d.EDGE_BOTTOM)||0},set:function(t){this.setMargin(d.EDGE_BOTTOM,t)}},{key:"marginLeft",get:function(){return this.layout.getComputedMargin(d.EDGE_LEFT)||0},set:function(t){this.setMargin(d.EDGE_LEFT,t)}},{key:"borderTopWidth",get:function(){return this.layout.getComputedBorder(d.EDGE_TOP)||0},set:function(t){this.setBorder(d.EDGE_TOP,t)}},{key:"borderRightWidth",get:function(){return this.layout.getComputedBorder(d.EDGE_RIGHT)||0},set:function(t){this.setBorder(d.EDGE_RIGHT,t)}},{key:"borderBottomWidth",get:function(){return this.layout.getComputedBorder(d.EDGE_BOTTOM)||0},set:function(t){this.setBorder(d.EDGE_BOTTOM,t)}},{key:"borderLeftWidth",get:function(){return this.layout.getComputedBorder(d.EDGE_LEFT)||0},set:function(t){this.setBorder(d.EDGE_LEFT,t)}},{key:"padding",get:function(){return{top:this.paddingTop,right:this.paddingRight,bottom:this.paddingBottom,left:this.paddingLeft}},set:function(t){this.paddingTop=t,this.paddingRight=t,this.paddingBottom=t,this.paddingLeft=t}},{key:"margin",get:function(){return{top:this.marginTop,right:this.marginRight,bottom:this.marginBottom,left:this.marginLeft}},set:function(t){this.marginTop=t,this.marginRight=t,this.marginBottom=t,this.marginLeft=t}}]),t}(),F=function(t,e){var r=function(t){return"alignItems"===t||"alignContent"===t||"alignSelf"===t};switch(e){case"auto":if("alignSelf"===t)return d.ALIGN_AUTO;break;case"flex":return d.DISPLAY_FLEX;case"none":return d.DISPLAY_NONE;case"row":return d.FLEX_DIRECTION_ROW;case"row-reverse":return d.FLEX_DIRECTION_ROW_REVERSE;case"column":return d.FLEX_DIRECTION_COLUMN;case"column-reverse":return d.FLEX_DIRECTION_COLUMN_REVERSE;case"stretch":return d.ALIGN_STRETCH;case"baseline":return d.ALIGN_BASELINE;case"space-around":if("justifyContent"===t)return d.JUSTIFY_SPACE_AROUND;if(r(t))return d.ALIGN_SPACE_AROUND;break;case"space-between":if("justifyContent"===t)return d.JUSTIFY_SPACE_BETWEEN;if(r(t))return d.ALIGN_SPACE_BETWEEN;break;case"around":return d.JUSTIFY_SPACE_AROUND;case"between":return d.JUSTIFY_SPACE_BETWEEN;case"wrap":return d.WRAP_WRAP;case"wrap-reverse":return d.WRAP_WRAP_REVERSE;case"nowrap":return d.WRAP_NO_WRAP;case"flex-start":if("justifyContent"===t)return d.JUSTIFY_FLEX_START;if(r(t))return d.ALIGN_FLEX_START;break;case"flex-end":if("justifyContent"===t)return d.JUSTIFY_FLEX_END;if(r(t))return d.ALIGN_FLEX_END;break;case"center":if("justifyContent"===t)return d.JUSTIFY_CENTER;if(r(t))return d.ALIGN_CENTER;break;default:return e}},G=function(t){var e={},r=function(t){var e=/^(-?\d*\.?\d+)(in|mm|cm|pt)?$/g.exec(t);return e?{value:parseFloat(e[1],10),unit:e[2]||"pt"}:{value:t,unit:void 0}}(t);switch(r.unit){case"in":e=72*r.value;break;case"mm":e=r.value*(1/25.4)*72;break;case"cm":e=r.value*(1/2.54)*72;break;default:e=r.value}return e},j=function(t,e){return t.match(/^border/)&&"string"==typeof e},U=function(t,e){var r=function(t){return t.match(/(\d+(px|in|mm|cm|pt)?)\s(\S+)\s(\S+)/)}(e);if(r){if(t.match(/.Color/))return r[4];if(t.match(/.Style/))return r[3];if(t.match(/.Width/))return r[1];throw new Error("StyleSheet: Invalid '"+e+"' for '"+t+"'")}return e},H=function(t,e){return t.match(/^(margin)|(padding)/)&&"string"==typeof e},V=function(t,e){var r=function(t){return t.match(/\d+(px|in|mm|cm|pt|%)?/g)}(e);if(r){if(t.match(/.Top/))return r[0];if(t.match(/.Right/))return r[1]||r[0];if(t.match(/.Bottom/))return r[2]||r[0];if(t.match(/.Left/))return r[3]||r[1]||r[0];throw new Error("StyleSheet: Invalid '"+e+"' for '"+t+"'")}return e},X=function(t,e){return t.match(/^objectPosition/)&&"string"==typeof e},Y=function(t,e){var r=function(t){return t.match(/\d+(px|in|mm|cm|pt|%)?/g)}(e);if(r){if(t.match(/.X/))return r[0];if(t.match(/.Y/))return r[1];throw new Error("StyleSheet: Invalid '"+e+"' for '"+t+"'")}return e},J=function(t,e){return t.match(/^transformOrigin/)&&"string"==typeof e},q=function(t,e){var r=function(t){return t.match(/(-?\d+(px|in|mm|cm|pt|%)?)|top|right|bottom|left|center/g)}(e);if(r){var n;if(t.match(/.X/))n=r[0];else{if(!t.match(/.Y/))throw new Error("StyleSheet: Invalid '"+e+"' for '"+t+"'");n=r[1]||r[0]}return function(t){switch(t){case"top":case"left":return"0%";case"right":case"bottom":return"100%";case"center":return"50%";default:return t}}(n)}return e},K=Object.prototype.hasOwnProperty,Z={margin:{marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0},marginHorizontal:{marginLeft:!0,marginRight:!0},marginVertical:{marginTop:!0,marginBottom:!0},padding:{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0},paddingHorizontal:{paddingLeft:!0,paddingRight:!0},paddingVertical:{paddingTop:!0,paddingBottom:!0},border:{borderTopColor:!0,borderTopStyle:!0,borderTopWidth:!0,borderRightColor:!0,borderRightStyle:!0,borderRightWidth:!0,borderBottomColor:!0,borderBottomStyle:!0,borderBottomWidth:!0,borderLeftColor:!0,borderLeftStyle:!0,borderLeftWidth:!0},borderTop:{borderTopColor:!0,borderTopStyle:!0,borderTopWidth:!0},borderRight:{borderRightColor:!0,borderRightStyle:!0,borderRightWidth:!0},borderBottom:{borderBottomColor:!0,borderBottomStyle:!0,borderBottomWidth:!0},borderLeft:{borderLeftColor:!0,borderLeftStyle:!0,borderLeftWidth:!0},borderColor:{borderTopColor:!0,borderRightColor:!0,borderBottomColor:!0,borderLeftColor:!0},borderRadius:{borderTopLeftRadius:!0,borderTopRightRadius:!0,borderBottomRightRadius:!0,borderBottomLeftRadius:!0},borderStyle:{borderTopStyle:!0,borderRightStyle:!0,borderBottomStyle:!0,borderLeftStyle:!0},borderWidth:{borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0},objectPosition:{objectPositionX:!0,objectPositionY:!0},transformOrigin:{transformOriginX:!0,transformOriginY:!0}},$=function(t){for(var e=function(t){if(!t)return t;for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var i=e[n],o=t[i];switch(i){case"display":case"flex":case"flexDirection":case"flexWrap":case"flexFlow":case"flexGrow":case"flexShrink":case"flexBasis":case"justifyContent":case"alignSelf":case"alignItems":case"alignContent":case"order":r[i]=F(i,o);break;case"textAlignVertical":r.verticalAlign="center"===o?"middle":o;break;case"margin":case"marginHorizontal":case"marginVertical":case"padding":case"paddingHorizontal":case"paddingVertical":case"border":case"borderTop":case"borderRight":case"borderBottom":case"borderLeft":case"borderColor":case"borderRadius":case"borderStyle":case"borderWidth":case"objectPosition":case"transformOrigin":var a=Z[i];for(var s in a)K.call(a,s)&&(r[s]=o);break;default:r[i]=o}}return r}(t),r=Object.keys(e),n={},i=0;i<r.length;i++){var o=r[i],a=e[o],s=void 0;s=j(o,a)?U(o,a):H(o,a)?V(o,a):X(o,a)?Y(o,a):J(o,a)?q(o,a):a,n[o]=G(s)}return n},Q=function t(e){return Array.isArray(e)||(e=[e]),e.reduce(function(e,r){if(r){var n=Array.isArray(r)?t(r):r;Object.keys(n).forEach(function(t){null!==n[t]&&void 0!==n[t]&&(e[t]=n[t])})}return e},{})},tt={hairlineWidth:1,create:function(t){return t},resolve:function(t,e){return t?(t=function(t,e){return Object.keys(t).reduce(function(n,i){var o,a;return/@media/.test(i)?r({},n,y(((a={})[i]=t[i],a),e)):r({},n,((o={})[i]=t[i],o))},{})}(t=Q(t),e),t=$(t)):null},flatten:Q,absoluteFillObject:{position:"absolute",top:0,left:0,bottom:0,right:0}},et={debug:function(){var t=this.getAbsoluteLayout(),e=this.padding,r=this.margin;this.root.instance.save(),this.debugContent(t,r,e),this.debugPadding(t,r,e),this.debugMargin(t,r),this.debugText(t,r),this.debugOrigin(),this.root.instance.restore()},debugOrigin:function(){if(this.style.transform){var t=this.origin;this.root.instance.circle(t[0],t[1],3).fill("red").circle(t[0],t[1],5).stroke("red")}},debugText:function(t,e){var r=Math.round(this.width+e.left+e.right),n=Math.round(this.height+e.top+e.bottom);this.root.instance.fontSize(4).opacity(1).fillColor("black").text(r+" x "+n,t.left-e.left,Math.max(t.top-e.top-4,1))},debugContent:function(t,e,r){this.root.instance.fillColor("#a1c6e7").opacity(.5).rect(t.left+r.left,t.top+r.top,t.width-r.left-r.right,t.height-r.top-r.bottom).fill()},debugPadding:function(t,e,r){this.root.instance.fillColor("#c4deb9").opacity(.5),this.root.instance.rect(t.left+r.left,t.top,t.width-r.right-r.left,r.top).fill(),this.root.instance.rect(t.left,t.top,r.left,t.height).fill(),this.root.instance.rect(t.left+t.width-r.right,t.top,r.right,t.height).fill(),this.root.instance.rect(t.left+r.left,t.top+t.height-r.bottom,t.width-r.right-r.left,r.bottom).fill()},debugMargin:function(t,e){this.root.instance.fillColor("#f8cca1").opacity(.5),this.root.instance.rect(t.left,t.top-e.top,t.width,e.top).fill(),this.root.instance.rect(t.left-e.left,t.top-e.top,e.left,t.height+e.top+e.bottom).fill(),this.root.instance.rect(t.left+t.width,t.top-e.top,e.right,t.height+e.top+e.bottom).fill(),this.root.instance.rect(t.left,t.top+t.height,t.width,e.bottom).fill()}},rt=(Math.sqrt(2)-1)/3*4;var nt=function(t,e,r,n,i){var o=e.top,a=e.left,s=e.width,h=e.height,u=r.borderTopWidth,c=r.borderRightWidth,l=r.borderLeftWidth;t.moveTo(a+i,o),t.lineTo(a+s-n,o);var d=n*(1-rt);t.bezierCurveTo(a+s-d,o,a+s,o+d,a+s,o+n);var f=o+Math.max(u,n);t.lineTo(a+s,f),t.lineTo(a+s-c,f);var p=Math.max(n-c,0),g=Math.max(n-u,0),m=p*(1-rt),y=g*(1-rt);t.bezierCurveTo(a+s-c,o+u+y,a+s-c-m,o+u,a+s-c-p,o+u),t.lineTo(a+Math.max(i,l),o+u);var v=Math.max(i-l,0),b=Math.max(i-u,0),T=v*(1-rt),w=b*(1-rt),x=o+Math.max(u,i);t.bezierCurveTo(a+l+T,o+u,a+l,o+u+w,a+l,x),t.lineTo(a,x),t.lineTo(a,o+i);var E=i*(1-rt);if(t.bezierCurveTo(a,o+E,a+E,o,a+i,o),t.closePath(),t.clip(),c){var k=-u/c;t.moveTo(a+s/2,k*(-s/2)+o),t.lineTo(a+s,o),t.lineTo(a,o),t.lineTo(a,o+h),t.closePath(),t.clip()}if(l){var C=-u/l;t.moveTo(a+s/2,C*(-s/2)+o),t.lineTo(a,o),t.lineTo(a+s,o),t.lineTo(a+s,o+h),t.closePath(),t.clip()}},it=function(t,e,r,n,i){var o=e.top,a=e.left,s=e.width,h=r.borderTopColor,u=r.borderTopWidth,c=r.borderTopStyle,l=r.borderRightWidth,d=r.borderLeftWidth,f=i*(1-rt),p=n*(1-rt);t.moveTo(a,o+Math.max(i,u)),t.bezierCurveTo(a,o+f,a+f,o,a+i,o),t.lineTo(a+s-n,o),t.bezierCurveTo(a+s-p,o,a+s,o+p,a+s,o+n),t.strokeColor(h),t.lineWidth(2*Math.max(l,u,d)),"dashed"===c?t.dash(2*u,{space:1.2*u}):"dotted"===c&&t.dash(u,{space:1.2*u}),t.stroke(),t.undash()},ot=function(t,e,r,n,i){var o=e.top,a=e.left,s=e.width,h=e.height,u=r.borderTopWidth,c=r.borderRightWidth,l=r.borderBottomWidth;t.moveTo(a+s,o+n),t.lineTo(a+s,o+h-i);var d=i*(1-rt);t.bezierCurveTo(a+s,o+h-d,a+s-d,o+h,a+s-i,o+h);var f=a+s-Math.max(c,i);t.lineTo(f,o+h),t.lineTo(f,o+h-l);var p=Math.max(i-c,0),g=Math.max(i-l,0),m=p*(1-rt),y=g*(1-rt);t.bezierCurveTo(a+s-c-m,o+h-l,a+s-c,o+h-l-y,a+s-c,o+h-Math.max(i,l)),t.lineTo(a+s-c,o+Math.max(n,u));var v=Math.max(n-c,0),b=Math.max(n-u,0),T=v*(1-rt),w=b*(1-rt),x=a+s-Math.max(n,c);t.bezierCurveTo(a+s-c,o+u+w,a+s-c-T,o+u,x,o+u),t.lineTo(x,o),t.lineTo(a+s-n,o);var E=n*(1-rt);if(t.bezierCurveTo(a+s-E,o,a+s,o+E,a+s,o+n),t.closePath(),t.clip(),u){var k=-u/c;t.moveTo(a+s/2,k*(-s/2)+o),t.lineTo(a+s,o),t.lineTo(a+s,o+h),t.lineTo(a,o+h),t.closePath(),t.clip()}if(l){var C=l/c;t.moveTo(a+s/2,C*(-s/2)+o+h),t.lineTo(a+s,o+h),t.lineTo(a+s,o),t.lineTo(a,o),t.closePath(),t.clip()}},at=function(t,e,r,n,i){var o=e.top,a=e.left,s=e.width,h=e.height,u=r.borderRightColor,c=r.borderRightStyle,l=r.borderRightWidth,d=r.borderTopWidth,f=r.borderBottomWidth,p=i*(1-rt),g=n*(1-rt);t.moveTo(a+s-n,o),t.bezierCurveTo(a+s-g,o,a+s,o+g,a+s,o+n),t.lineTo(a+s,o+h-i),t.bezierCurveTo(a+s,o+h-p,a+s-p,o+h,a+s-i,o+h),t.strokeColor(u),t.lineWidth(2*Math.max(l,d,f)),"dashed"===c?t.dash(2*l,{space:1.2*l}):"dotted"===c&&t.dash(l,{space:1.2*l}),t.stroke(),t.undash()},st=function(t,e,r,n,i){var o=e.top,a=e.left,s=e.width,h=e.height,u=r.borderBottomWidth,c=r.borderRightWidth,l=r.borderLeftWidth;t.moveTo(a+s-i,o+h),t.lineTo(a+n,o+h);var d=n*(1-rt);t.bezierCurveTo(a+d,o+h,a,o+h-d,a,o+h-n);var f=o+h-Math.max(u,n);t.lineTo(a,f),t.lineTo(a+l,f);var p=Math.max(n-l,0),g=Math.max(n-u,0),m=p*(1-rt),y=g*(1-rt);t.bezierCurveTo(a+l,o+h-u-y,a+l+m,o+h-u,a+l+p,o+h-u),t.lineTo(a+s-Math.max(i,c),o+h-u);var v=Math.max(i-c,0),b=Math.max(i-u,0),T=v*(1-rt),w=b*(1-rt),x=o+h-Math.max(u,i);t.bezierCurveTo(a+s-c-T,o+h-u,a+s-c,o+h-u-w,a+s-c,x),t.lineTo(a+s,x),t.lineTo(a+s,o+h-i);var E=i*(1-rt);if(t.bezierCurveTo(a+s,o+h-E,a+s-E,o+h,a+s-i,o+h),t.closePath(),t.clip(),c){var k=u/c;t.moveTo(a+s/2,k*(-s/2)+o+h),t.lineTo(a+s,o+h),t.lineTo(a,o+h),t.lineTo(a,o),t.closePath(),t.clip()}if(l){var C=-u/l;t.moveTo(a+s/2,C*(s/2)+o+h),t.lineTo(a,o+h),t.lineTo(a+s,o+h),t.lineTo(a+s,o),t.closePath(),t.clip()}},ht=function(t,e,r,n,i){var o=e.top,a=e.left,s=e.width,h=e.height,u=r.borderBottomColor,c=r.borderBottomStyle,l=r.borderBottomWidth,d=r.borderRightWidth,f=r.borderLeftWidth,p=n*(1-rt),g=i*(1-rt);t.moveTo(a+s,o+h-i),t.bezierCurveTo(a+s,o+h-g,a+s-g,o+h,a+s-i,o+h),t.lineTo(a+n,o+h),t.bezierCurveTo(a+p,o+h,a,o+h-p,a,o+h-n),t.strokeColor(u),t.lineWidth(2*Math.max(l,d,f)),"dashed"===c?t.dash(2*l,{space:1.2*l}):"dotted"===c&&t.dash(l,{space:1.2*l}),t.stroke(),t.undash()},ut=function(t,e,r,n,i){var o=e.top,a=e.left,s=e.width,h=e.height,u=r.borderTopWidth,c=r.borderLeftWidth,l=r.borderBottomWidth;t.moveTo(a,o+h-n),t.lineTo(a,o+i);var d=i*(1-rt);t.bezierCurveTo(a,o+d,a+d,o,a+i,o);var f=a+Math.max(c,i);t.lineTo(f,o),t.lineTo(f,o+u);var p=Math.max(i-c,0),g=Math.max(i-u,0),m=p*(1-rt),y=g*(1-rt);t.bezierCurveTo(a+c+m,o+u,a+c,o+u+y,a+c,o+Math.max(i,u)),t.lineTo(a+c,o+h-Math.max(n,l));var v=Math.max(n-c,0),b=Math.max(n-l,0),T=v*(1-rt),w=b*(1-rt),x=a+Math.max(n,c);t.bezierCurveTo(a+c,o+h-l-w,a+c+T,o+h-l,x,o+h-l),t.lineTo(x,o+h),t.lineTo(a+n,o+h);var E=n*(1-rt);if(t.bezierCurveTo(a+E,o+h,a,o+h-E,a,o+h-n),t.closePath(),t.clip(),l){var k=-l/c;t.moveTo(a+s/2,k*(s/2)+o+h),t.lineTo(a,o+h),t.lineTo(a,o),t.lineTo(a+s,o),t.closePath(),t.clip()}if(l){var C=-u/c;t.moveTo(a+s/2,C*(-s/2)+o),t.lineTo(a,o),t.lineTo(a,o+h),t.lineTo(a+s,o+h),t.closePath(),t.clip()}},ct=function(t,e,r,n,i){var o=e.top,a=e.left,s=e.height,h=r.borderLeftColor,u=r.borderLeftStyle,c=r.borderLeftWidth,l=r.borderTopWidth,d=r.borderBottomWidth,f=n*(1-rt),p=i*(1-rt);t.moveTo(a+n,o+s),t.bezierCurveTo(a+f,o+s,a,o+s-f,a,o+s-n),t.lineTo(a,o+i),t.bezierCurveTo(a,o+p,a+p,o,a+i,o),t.strokeColor(h),t.lineWidth(2*Math.max(c,l,d)),"dashed"===u?t.dash(2*c,{space:1.2*c}):"dotted"===u&&t.dash(c,{space:1.2*c}),t.stroke(),t.undash()},lt={drawBorders:function(){var t=this.root.instance,e=this.getAbsoluteLayout(),r=this.borderTopWidth,n=this.borderLeftWidth,i=this.borderRightWidth,o=this.borderBottomWidth,a=this.style,s=a.opacity,h=a.borderTopLeftRadius,u=void 0===h?0:h,c=a.borderTopRightRadius,l=void 0===c?0:c,d=a.borderBottomLeftRadius,f=void 0===d?0:d,p=a.borderBottomRightRadius,g=void 0===p?0:p,m=a.borderTopColor,y=void 0===m?"black":m,v=a.borderTopStyle,b=void 0===v?"solid":v,T=a.borderLeftColor,w=void 0===T?"black":T,x=a.borderLeftStyle,E=void 0===x?"solid":x,k=a.borderRightColor,C=void 0===k?"black":k,R=a.borderRightStyle,S=void 0===R?"solid":R,P=a.borderBottomColor,A=void 0===P?"black":P,L=a.borderBottomStyle,B={borderTopColor:y,borderTopWidth:r,borderTopStyle:b,borderLeftColor:w,borderLeftWidth:n,borderLeftStyle:E,borderRightColor:C,borderRightWidth:i,borderRightStyle:S,borderBottomColor:A,borderBottomWidth:o,borderBottomStyle:void 0===L?"solid":L,borderTopLeftRadius:u,borderTopRightRadius:l,borderBottomLeftRadius:f,borderBottomRightRadius:g},M=e.width,O=e.height,D=Math.min(l,.5*M,.5*O),I=Math.min(u,.5*M,.5*O),_=Math.min(g,.5*M,.5*O),W=Math.min(f,.5*M,.5*O);t.save(),t.strokeOpacity(s),r&&(t.save(),nt(t,e,B,D,I),it(t,e,B,D,I),t.restore()),i&&(t.save(),ot(t,e,B,D,_),at(t,e,B,D,_),t.restore()),o&&(t.save(),st(t,e,B,W,_),ht(t,e,B,W,_),t.restore()),n&&(t.save(),ut(t,e,B,W,I),ct(t,e,B,W,I),t.restore()),t.restore()}},dt=(Math.sqrt(2)-1)/3*4,ft={clip:function(){var t=this.getAbsoluteLayout(),e=t.top,r=t.left,n=t.width,i=t.height,o=this.style,a=o.borderTopLeftRadius,s=void 0===a?0:a,h=o.borderTopRightRadius,u=void 0===h?0:h,c=o.borderBottomRightRadius,l=void 0===c?0:c,d=o.borderBottomLeftRadius,f=void 0===d?0:d,p=Math.min(u,.5*n,.5*i),g=p*(1-dt);this.root.instance.moveTo(r+p,e),this.root.instance.lineTo(r+n-p,e),this.root.instance.bezierCurveTo(r+n-g,e,r+n,e+g,r+n,e+p);var m=Math.min(l,.5*n,.5*i),y=m*(1-dt);this.root.instance.lineTo(r+n,e+i-m),this.root.instance.bezierCurveTo(r+n,e+i-y,r+n-y,e+i,r+n-m,e+i);var v=Math.min(f,.5*n,.5*i),b=v*(1-dt);this.root.instance.lineTo(r+v,e+i),this.root.instance.bezierCurveTo(r+b,e+i,r,e+i-b,r,e+i-v);var T=Math.min(s,.5*n,.5*i),w=T*(1-dt);this.root.instance.lineTo(r,e+T),this.root.instance.bezierCurveTo(r,e+w,r+w,e,r+T,e),this.root.instance.closePath(),this.root.instance.clip()}},pt=function(t){var e=/translateX\((-?\d+\.?d*)\)/g.exec(t),r=/translate\((-?\d+\.?d*).*,\s*(-?\d+\.?d*).*\)/g.exec(t);return e&&e[1]?e[1]:r&&r[1]?r[1]:0},gt=function(t){var e=/translateY\((-?\d+\.?\d*)\)/g.exec(t),r=/translate\((-?\d+\.?\d*).*,\s*(-?\d+\.?\d*).*\)/g.exec(t);return e&&e[1]?e[1]:r&&r[2]?r[2]:0},mt=function(t){var e=/scaleX\((-?\d+\.?\d*)\)/g.exec(t),r=/scale\((-?\d+\.?\d*).*,\s*(-?\d+\.?\d*).*\)/g.exec(t);return e&&e[1]?e[1]:r&&r[1]?r[1]:1},yt=function(t){var e=/scaleY\((-?\d+\.?\d*)\)/g.exec(t),r=/scale\((-?\d+\.?\d*).*,\s*(-?\d+\.?\d*).*\)/g.exec(t);return e&&e[1]?e[1]:r&&r[2]?r[2]:1},vt=function(t,e,r){if(/rotate/g.test(e))t.root.instance.rotate(function(t){var e=/rotate\((-?\d+.?\d+)(.+)\)/g.exec(t);if(e&&e[1]&&e[2]){var r=e[1];return"rad"===e[2]?180*r/Math.PI:r}return 0}(e),{origin:r});else if(/scaleX/g.test(e))t.root.instance.scale(mt(e),1,{origin:r});else if(/scaleY/g.test(e))t.root.instance.scale(1,yt(e),{origin:r});else if(/scale/g.test(e))t.root.instance.scale(mt(e),yt(e),{origin:r});else if(/translateX/g.test(e))t.root.instance.translate(pt(e),1,{origin:r});else if(/translateY/g.test(e))t.root.instance.translate(1,gt(e),{origin:r});else if(/translate/g.test(e))t.root.instance.translate(pt(e),gt(e),{origin:r});else if(/matrix/g.test(e)){var n;(n=t.root.instance).transform.apply(n,function(t){var e=/matrix\(([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+)\)/g.exec(t);return e?e.slice(1,7):null}(e))}},bt={applyTransformations:function(){for(var t,e=/[a-zA-Z]+\([^)]+\)/g,r=this.origin,n=this.style&&this.style.transform||"";null!=(t=e.exec(n));)vt(this,t[0],r)}},Tt=["color","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","opacity","textDecoration","lineHeight","textAlign","visibility","wordSpacing"],wt=function(e){function n(t,r){var i;return(i=e.call(this)||this).root=t,i.style={},i.props=p({},i.constructor.defaultProps,n.defaultProps,r),I(!i.props.styles,'"styles" prop passed instead of "style" prop'),i}t(n,e);var i=n.prototype;return i.appendChild=function(t){e.prototype.appendChild.call(this,t),this.root.markDirty()},i.appendChildBefore=function(t,r){e.prototype.appendChildBefore.call(this,t,r),this.root.markDirty()},i.removeChild=function(t){e.prototype.removeChild.call(this,t),this.root.markDirty()},i.update=function(t){this.props=p({},this.constructor.defaultProps,n.defaultProps,t),this.root.markDirty()},i.applyProps=function(){var t=this;this.style=this.resolveStyles(),g(this.style).map(function(e){var r=e[0],n=e[1];t.applyStyle(r,n)}),this.children.forEach(function(t){t.applyProps&&t.applyProps()})},i.resolveStyles=function(){var t=this.page,e=t.size,n=t.orientation,i=tt.resolve(this.props.style,{orientation:n,width:e.width,height:e.height}),o=this.parent?f(this.parent.style,Tt):{};return r({},o,i)},i.applyStyle=function(t,e){if(void 0!==e){var r="set"+W(t);switch(t){case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":case"borderTopWidth":case"borderRightWidth":case"borderBottomWidth":case"borderLeftWidth":case"position":case"top":case"right":case"bottom":case"left":case"width":case"height":case"minHeight":case"maxHeight":case"minWidth":case"maxWidth":this[t]=e;break;default:m(this.layout[r])&&this.layout[r](e)}}},i.getLayoutData=function(){var t=this.getAbsoluteLayout();return{type:this.name,top:t.top,left:t.left,width:t.width,style:this.style,height:t.height,children:this.children.map(function(t){return t.getLayoutData()})}},i.drawBackgroundColor=function(){var t=this.style,e=t.backgroundColor,r=t.opacity,n=void 0===r?1:r,i=this.getAbsoluteLayout(),o=i.left,a=i.top,s=i.width,h=i.height;e&&(this.root.instance.save(),this.clip(),this.root.instance.fillOpacity(n).fillColor(e).rect(o,a,s,h).fill().restore())},i.clone=function(){var t=new this.constructor(this.root,this.props);return t.copyStyle(this),t.style=this.style,t},i.onNodeSplit=function(t,e){this.calculateLayout(),e.marginTop=0,e.paddingTop=0,e.style.height&&(e.height=this.height-t),this.height=t,this.marginBottom=0,this.paddingBottom=0},i.renderChildren=function(){var t=a(o.mark(function t(){var e,r,n,i;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.children.filter(function(t){return t.absolute}),r=this.children.filter(function(t){return!t.absolute}),n=0;case 3:if(!(n<r.length)){t.next=9;break}return t.next=6,r[n].render();case 6:n++,t.next=3;break;case 9:i=0;case 10:if(!(i<e.length)){t.next=16;break}return t.next=13,e[i].render();case 13:i++,t.next=10;break;case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),u(n,[{key:"page",get:function(){return this.parent.page}},{key:"wrap",get:function(){return this.props.wrap}},{key:"break",get:function(){return this.props.break},set:function(t){this.props.break=t}},{key:"fixed",get:function(){return this.props.fixed}},{key:"minPresenceAhead",get:function(){return this.props.minPresenceAhead}},{key:"absolute",get:function(){return"absolute"===this.props.style.position}},{key:"origin",get:function(){var t=this.style,e=t.transformOriginX,r=t.transformOriginY,n=this.getAbsoluteLayout(),i=n.left,o=n.top,a=n.width,s=n.height,h=z(e),u=z(r);return[i+(h?a*h.percent:e),o+(u?s*u.percent:r)]}}]),n}(N);wt.defaultProps={style:{borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,transformOriginX:"50%",transformOriginY:"50%"},minPresenceAhead:0},Object.assign(wt.prototype,et),Object.assign(wt.prototype,lt),Object.assign(wt.prototype,ft),Object.assign(wt.prototype,bt);var xt=function(t,e){return Array.from({length:Math.ceil(t/e)},function(t,r){return r*e})},Et=function(t){var e=z(t);return e?100/e.value:null},kt={getRulerWidth:function(){return 13},hasHorizontalRuler:function(){return this.props.ruler||this.props.horizontalRuler},hasVerticalRuler:function(){return this.props.ruler||this.props.verticalRuler},getHorizontalSteps:function(){var t=this.props.horizontalRulerSteps||this.props.rulerSteps||50;if("string"==typeof t){var e=Et(t);if(e)return(this.width-(this.hasVerticalRuler()?13:0))/e;throw new Error("Page: Invalid horizontal steps value")}return t},getVerticalSteps:function(){var t=this.props.verticalRulerSteps||this.props.rulerSteps||50;if("string"==typeof t){var e=Et(t);if(e)return(this.height-(this.hasHorizontalRuler()?13:0))/e;throw new Error("Page: Invalid horizontal steps value")}return t},renderRuler:function(){var t=this.hasHorizontalRuler(),e=this.hasVerticalRuler();(t||e)&&(this.root.instance.save().lineWidth(.5).fontSize(5).opacity(1),t&&this.drawHorizontalRuler(),e&&this.drawVerticalRuler(),t&&e&&this.root.instance.rect(0,0,12.5,12.5).fill("white"),this.root.instance.restore())},drawHorizontalRuler:function(){var t=this,e=this.hasVerticalRuler()?13:0;this.root.instance.rect(e,0,this.width,13).fill("white").moveTo(this.hasVerticalRuler()?13:0,13).lineTo(this.width,13).stroke("gray");var r=xt(this.width,this.getHorizontalSteps());r.map(function(r){t.root.instance.moveTo(e+r,0).lineTo(e+r,13).stroke("gray").fillColor("black").text(""+Math.round(r),e+r+1,1)}),r.map(function(r){0!==r&&t.root.instance.moveTo(e+r,13).lineTo(e+r,t.height).stroke("#ababab")})},drawVerticalRuler:function(){var t=this,e=this.hasHorizontalRuler()?13:0;this.root.instance.rect(0,e,13,this.height).fill("white").moveTo(13,this.hasHorizontalRuler()?13:0).lineTo(13,this.height).stroke("gray");var r=xt(this.height,this.getVerticalSteps());r.map(function(r){t.root.instance.moveTo(0,e+r).lineTo(13,e+r).stroke("gray").fillColor("black").text(""+Math.round(r),1,e+r+1)}),r.map(function(r){0!==r&&t.root.instance.moveTo(13,e+r).lineTo(t.width,e+r).stroke("#ababab")})}},Ct=function(){function t(t,e){this.root=t,this.value=e,this.parent=null,this.props={}}var e=t.prototype;return e.getLayoutData=function(){return this.value},e.remove=function(){this.parent.removeChild(this)},e.clone=function(){return new this.constructor(this.root,this.value)},e.update=function(t){this.value=t,this.parent.computed=!1,this.parent.container=null,this.root.markDirty()},u(t,[{key:"name",get:function(){return"TextInstance"}}]),t}(),Rt={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]},St=function(e){function r(t,r){var n;return(n=e.call(this,t,r)||this)._size=null,n}t(r,e);var n=r.prototype;return n.resetMargins=function(){(this.marginTop||this.marginBottom||this.marginLeft||this.marginRight)&&(I(!1,"Margin values are not allowed on Page element. Use padding instead."),this.marginTop=0,this.marginBottom=0,this.marginLeft=0,this.marginRight=0)},n.applyProps=function(){e.prototype.applyProps.call(this),this.top=0,this.left=0,this.width=this.size.width,this.resetMargins();var t=this.getRulerWidth();this.hasHorizontalRuler()&&(this.paddingTop=this.paddingTop+t),this.hasVerticalRuler()&&(this.paddingLeft=this.paddingLeft+t)},n.setPadding=function(t,e){var r=t===d.EDGE_TOP||t===d.EDGE_BOTTOM?this.size.height:this.size.width,n=z(e);n?this.layout.setPadding(t,r*n.percent):this.layout.setPadding(t,e)},n.addDynamicChild=function(){var t=a(o.mark(function t(e,r){var n,a,s,h,u,c,l;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:n=Array.isArray(r)?r:[r],a=0;case 4:if(!(a<n.length)){t.next=27;break}if(s=n[a],h=s.type,u=s.props,"string"!=typeof s){t.next=12;break}c=new Ct(this.root,s),e.appendChild(c),t.next=24;break;case 12:if(h===i){t.next=22;break}return l=ze(s,this.root),t.next=16,l.onAppendDynamically();case 16:return e.appendChild(l),l.applyProps(),t.next=20,this.addDynamicChild(l,u.children);case 20:t.next=24;break;case 22:return t.next=24,this.addDynamicChild(e,u.children);case 24:a++,t.next=4;break;case 27:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),n.renderDynamicNodes=function(){var t=a(o.mark(function t(e,r){var n,i,a;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.children.slice(0);case 1:if(!(n.length>0)){t.next=14;break}if(i=n.shift(),!(!r||r(i))||!i.props.render){t.next=11;break}return i.removeAllChilds(),a=i.props.render(e),t.next=9,this.addDynamicChild(i,a);case 9:return i.fixed||(i.props.render=null),t.abrupt("continue",1);case 11:i.children&&n.push.apply(n,i.children),t.next=1;break;case 14:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),n.nodeWillWrap=function(){var t=a(o.mark(function t(e){return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.renderDynamicNodes(e);case 2:this.calculateLayout();case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n.onNodeSplit=function(t,e){e.marginTop=0,this.marginBottom=0,this.calculateLayout()},n.clone=function(){var t=e.prototype.clone.call(this);return t._size=this.size,t},n.render=function(){var t=a(o.mark(function t(){var e;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.root.instance,this.height=this.size.height,this.calculateLayout(),e.addPage({size:[this.size.width,this.size.height],margin:0}),this.style.backgroundColor&&e.fillColor(this.style.backgroundColor).rect(0,0,this.size.width,this.size.height).fill(),t.next=7,this.renderChildren();case 7:this.props.debug&&this.debug(),this.renderRuler();case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),u(r,[{key:"name",get:function(){return"Page"}},{key:"document",get:function(){return this.parent}},{key:"page",get:function(){return this}},{key:"orientation",get:function(){return this.props.orientation}},{key:"size",get:function(){return this._size?this._size:(this._size=function(t,e){var r;if(void 0===e&&(e="portrait"),"string"==typeof t)r=Rt[t.toUpperCase()];else if(Array.isArray(t))r=t;else{if("object"!=typeof t||!t.width||!t.height)throw new Error("Invalid Page size: "+t);r=[t.width,t.height]}return"portrait"===e?{width:r[0],height:r[1]}:{width:r[1],height:r[0]}}(this.props.size,this.orientation),this.hasHorizontalRuler()&&(this._size.width+=this.getRulerWidth()),this.hasVerticalRuler()&&(this._size.height+=this.getRulerWidth()),this._size)}}]),r}(wt);St.defaultProps={size:"A4",wrap:!0,orientation:"portrait"},Object.assign(St.prototype,kt);var Pt=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.render=function(){var t=a(o.mark(function t(){return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.root.instance.save(),this.applyTransformations(),this.drawBackgroundColor(),this.drawBorders(),t.next=6,this.renderChildren();case 6:this.props.debug&&this.debug(),this.root.instance.restore();case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),u(r,[{key:"name",get:function(){return"View"}}]),r}(wt);Pt.defaultProps={wrap:!0};var At,Lt,Bt=["Courier","Courier-Bold","Courier-Oblique","Helvetica","Helvetica-Bold","Helvetica-Oblique","Times-Roman","Times-Bold","Times-Italic"],Mt={},Ot=function(){var t=a(o.mark(function t(e,r){var n,i;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,r);case 2:return n=t.sent,t.next=5,n.buffer?n.buffer():n.arrayBuffer();case 5:return i=t.sent,t.abrupt("return","Buffer"===i.constructor.name?i:Buffer.from(i));case 7:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}(),Dt=function(t){return Mt[t]},It=function(){var t=a(o.mark(function t(e,r){var n,i,a,s,h,u,c;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=Dt(e))||n.data||n.loading){t.next=16;break}if(n.loading=!0,!T(n.src)){t.next=11;break}return i=n.src,a=n.headers,s=n.body,h=n.method,u=void 0===h?"GET":h,t.next=7,Ot(i,{headers:a,method:u,body:s});case 7:c=t.sent,n.data=x.create(c),t.next=16;break;case 11:throw new Error("Invalid font url: "+n.src+". If you use relative url please replace it with absolute one (ex. /font.ttf -> http://localhost:3000/font.ttf)");case 13:return t.next=15,new Promise(function(t,e){return x.open(n.src,function(r,n){return r?e(r):t(n)})});case 15:n.data=t.sent;case 16:if(n&&!n.loaded&&(n.loaded=!0,n.loading=!1,r.registerFont(e,n.data)),n||Bt.includes(e)){t.next=19;break}throw new Error("Font family not registered: "+e+". Please register it calling Font.register() method.");case 19:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}(),_t={register:function(t,n){var i=n.family,o=e(n,["family"]);Mt[i]=r({src:t,loaded:!1,loading:!1,data:null},o)},getEmojiSource:function(){return At},getRegisteredFonts:function(){return Object.keys(Mt)},registerEmojiSource:function(t){var e=t.url,r=t.format;At={url:e,format:void 0===r?"png":r}},registerHyphenationCallback:function(t){Lt=t},getHyphenationCallback:function(){return Lt},getFont:Dt,load:It,clear:function(){Mt={}},reset:function(){for(var t in Mt)Mt.hasOwnProperty(t)&&(Mt[t].loaded=!1)}},Wt=/^(http|https|ftp|ftps|mailto)/i,zt=function(t){return"string"!=typeof t||t.match(Wt)?t:"http://"+t},Nt=function(){function t(t){this.name=t,this.src=l.open(null,t)}var e=t.prototype;return e.layout=function(t){var e=this,r=this.src.encode(t),n=r[0],i=r[1];return{positions:i,stringIndices:i.map(function(t,e){return e}),glyphs:n.map(function(t,r){var n=e.getGlyph(parseInt(t,16));return n.advanceWidth=i[r].advanceWidth,n})}},e.glyphForCodePoint=function(t){var e=this.getGlyph(t);return e.advanceWidth=400,e},e.getGlyph=function(t){return{id:t,_font:this.src,codePoints:[t],isLigature:!1,name:this.src.font.characterToGlyph(t)}},e.hasGlyphForCodePoint=function(t){return".notdef"!==this.src.font.characterToGlyph(t)},u(t,[{key:"ascent",get:function(){return this.src.ascender}},{key:"descent",get:function(){return this.src.descender}},{key:"lineGap",get:function(){return this.src.lineGap}},{key:"unitsPerEm",get:function(){return 1e3}}]),t}(),Ft=function(){return function(t){var e=t.Run;return function(){function t(){this.fontCache={}}var r=t.prototype;return r.getOrCreateFont=function(t){if(this.fontCache[t])return this.fontCache[t];var e=new Nt(t);return this.fontCache[t]=e,e},r.shouldFallbackToFont=function(t,e){return!e.hasGlyphForCodePoint(t)&&this.fallbackFont.hasGlyphForCodePoint(t)},r.getRuns=function(t,r){var n=[],i=null,o=0,a=0,s=r,h=Array.isArray(s),u=0;for(s=h?s:s[Symbol.iterator]();;){var c;if(h){if(u>=s.length)break;c=s[u++]}else{if((u=s.next()).done)break;c=u.value}var l=c,d="string"==typeof l.attributes.font?this.getOrCreateFont(l.attributes.font):l.attributes.font;if(0===t.length){n.push(new e(0,0,{font:d}));break}var f=t.slice(l.start,l.end),p=Array.isArray(f),g=0;for(f=p?f:f[Symbol.iterator]();;){var m;if(p){if(g>=f.length)break;m=f[g++]}else{if((g=f.next()).done)break;m=g.value}var y=m,v=y.codePointAt(),b=this.shouldFallbackToFont(v,d)?this.fallbackFont:d;b!==i&&(i&&n.push(new e(o,a,{font:i})),i=b,o=a),a+=y.length}}return o<t.length&&n.push(new e(o,t.length,{font:i})),n},u(t,[{key:"fallbackFont",get:function(){return this.getOrCreateFont("Helvetica")}}]),t}()}},Gt=require("hyphen"),jt=require("hyphen/patterns/en-us"),Ut=Gt(jt),Ht=function(t){var e=t.hyphenationCallback;return function(){return function(){function t(){this.cache={}}var r=t.prototype;return r.calculateParts=function(t){return t.includes("­")?t.split("­"):Ut(t).split("­")},r.hyphenateWord=function(t){if(this.cache[t])return this.cache[t];var r=e?e(t):this.calculateParts(t);return this.cache[t]=r,r},t}()}},Vt=function(){function t(t){this.prev=null,this.next=null,this.data=t}return t.prototype.toString=function(){return this.data.toString()},t}(),Xt=function(){function t(){this.head=null,this.tail=null,this.listSize=0}var e=t.prototype;return e.isLinked=function(t){return!(t&&null===t.prev&&null===t.next&&this.tail!==t&&this.head!==t||this.isEmpty())},e.size=function(){return this.listSize},e.isEmpty=function(){return 0===this.listSize},e.first=function(){return this.head},e.last=function(){return this.last},e.toString=function(){return this.toArray().toString()},e.toArray=function(){for(var t=this.head,e=[];null!==t;)e.push(t),t=t.next;return e},e.forEach=function(t){for(var e=this.head;null!==e;)t(e),e=e.next},e.contains=function(t){var e=this.head;if(!this.isLinked(t))return!1;for(;null!==e;){if(e===t)return!0;e=e.next}return!1},e.at=function(t){var e=this.head,r=0;if(t>=this.listLength||t<0)return null;for(;null!==e;){if(t===r)return e;e=e.next,r+=1}return null},e.insertAfter=function(t,e){return this.isLinked(t)?(e.prev=t,e.next=t.next,null===t.next?this.tail=e:t.next.prev=e,t.next=e,this.listSize+=1,this):this},e.insertBefore=function(t,e){return this.isLinked(t)?(e.prev=t.prev,e.next=t,null===t.prev?this.head=e:t.prev.next=e,t.prev=e,this.listSize+=1,this):this},e.push=function(t){return null===this.head?this.unshift(t):this.insertAfter(this.tail,t),this},e.unshift=function(t){return null===this.head?(this.head=t,this.tail=t,t.prev=null,t.next=null,this.listSize+=1):this.insertBefore(this.head,t),this},e.remove=function(t){return this.isLinked(t)?(null===t.prev?this.head=t.next:t.prev.next=t.next,null===t.next?this.tail=t.prev:t.next.prev=t.prev,this.listSize-=1,this):this},e.pop=function(){var t=this.tail;return this.tail.prev.next=null,this.tail=this.tail.prev,this.listSize-=1,t.prev=null,t.next=null,t},e.shift=function(){var t=this.head;return this.head.next.prev=null,this.head=this.head.next,this.listSize-=1,t.prev=null,t.next=null,t},t}();Xt.Node=Vt;var Yt=function t(e,r,n){var i={demerits:{line:n&&n.demerits&&n.demerits.line||10,flagged:n&&n.demerits&&n.demerits.flagged||100,fitness:n&&n.demerits&&n.demerits.fitness||3e3},tolerance:n&&n.tolerance||3},o=new Xt,a={width:0,stretch:0,shrink:0},s=r,h=[],u={data:{demerits:1/0}};function c(t,e,r,n,i,o,a){return{position:t,demerits:e,ratio:r,line:n,fitnessClass:i,totals:o||{width:0,stretch:0,shrink:0},previous:a}}function l(r,n,i,o){var h=a.width-i.totals.width,u=0,c=0,l=o<s.length?s[o-1]:s[s.length-1];return"penalty"===e[n].type&&(h+=e[n].width),h<l?(u=a.stretch-i.totals.stretch)>0?(l-h)/u:t.infinity:h>l?(c=a.shrink-i.totals.shrink)>0?(l-h)/c:t.infinity:0}function d(r){for(var n={width:a.width,stretch:a.stretch,shrink:a.shrink},i=r;i<e.length;i+=1)if("glue"===e[i].type)n.width+=e[i].width,n.stretch+=e[i].stretch,n.shrink+=e[i].shrink;else if("box"===e[i].type||"penalty"===e[i].type&&e[i].penalty===-t.infinity&&i>r)break;return n}function f(e,r,n){for(var a,s,h,u,f,p=o.first(),g=null,m=0,y=0,v=[],b=0,T=0;null!==p;){for(v=[{demerits:1/0},{demerits:1/0},{demerits:1/0},{demerits:1/0}];null!==p&&(g=p.next,b=p.data.line+1,((m=l(p.data.position,r,p.data,b))<-1||"penalty"===e.type&&e.penalty===-t.infinity)&&o.remove(p),m>=-1&&m<=i.tolerance&&(a=100*Math.pow(Math.abs(m),3),y="penalty"===e.type&&e.penalty>=0?Math.pow(i.demerits.line+a,2)+Math.pow(e.penalty,2):"penalty"===e.type&&e.penalty!==-t.infinity?Math.pow(i.demerits.line+a,2)-Math.pow(e.penalty,2):Math.pow(i.demerits.line+a,2),"penalty"===e.type&&"penalty"===n[p.data.position].type&&(y+=i.demerits.flagged*e.flagged*n[p.data.position].flagged),T=m<-.5?0:m<=.5?1:m<=1?2:3,Math.abs(T-p.data.fitnessClass)>1&&(y+=i.demerits.fitness),(y+=p.data.demerits)<v[T].demerits&&(v[T]={active:p,demerits:y,ratio:m})),!(null!==(p=g)&&p.data.line>=b)););for(s=d(r),h=0;h<v.length;h+=1)(u=v[h]).demerits<1/0&&(f=new Xt.Node(c(r,u.demerits,u.ratio,u.active.data.line+1,h,s,u.active)),null!==p?o.insertBefore(p,f):o.push(f))}}if(o.push(new Xt.Node(c(0,0,0,0,0,void 0,null))),e.forEach(function(e,r,n){"box"===e.type?a.width+=e.width:"glue"===e.type?(r>0&&"box"===n[r-1].type&&f(e,r,n),a.width+=e.width,a.stretch+=e.stretch,a.shrink+=e.shrink):"penalty"===e.type&&e.penalty!==t.infinity&&f(e,r,n)}),0!==o.size()){for(o.forEach(function(t){t.data.demerits<u.data.demerits&&(u=t)});null!==u;)h.push({position:u.data.position,ratio:u.data.ratio}),u=u.data.previous;return h.reverse()}return[]};Yt.infinity=1e4,Yt.glue=function(t,e,r,n){return{type:"glue",value:e,width:t,stretch:r,shrink:n}},Yt.box=function(t,e,r){return void 0===r&&(r=!1),{type:"box",width:t,value:e,hyphenated:r}},Yt.penalty=function(t,e,r){return{type:"penalty",width:t,penalty:e,flagged:r}};var Jt=function(t,e,r){for(var n=null,i=1/0,o={width:0,stretch:0,shrink:0},a=e[Math.min(r,e.length-1)],s=function(t){return o.width<a?o.stretch-t.stretch>0?(a-o.width)/o.stretch:1e4:o.width>a?o.shrink-t.shrink>0?(a-o.width)/o.shrink:1e4:0},h=0;h<t.length;h++){var u=t[h];if("box"===u.type?o.width+=u.width:"glue"===u.type&&(o.width+=u.width,o.stretch+=u.stretch,o.shrink+=u.shrink),o.width-o.shrink>a)break;if("penalty"===u.type||"glue"===u.type){var c=s(u),l="penalty"===u.type?u.penalty:0,d=100*Math.pow(Math.abs(c),3)+l;i>=d&&(n=h,i=d)}}return o.width-o.shrink>a?n:null},qt=3,Kt=6,Zt=9,$t=function(t){var e=(void 0===t?{}:t).penalty;return function(){return function(){function t(t){this.tolerance=t||4}var r=t.prototype;return r.getNodes=function(t,r,n){var i=n.align,o=0,a=e||("justify"===i?100:600),s=r.reduce(function(e,n,i){var s=t.glyphIndexForStringIndex(o),h=t.glyphIndexForStringIndex(o+n.length),u=t.slice(s,h);if(""===u.string.trim()){var c=u.advanceWidth,l=c*qt/Kt,d=c*qt/Zt,f={value:u,start:o,end:o+u.end};e.push(Yt.glue(c,f,l,d))}else{var p=" "!==r[i+1],g={value:u,start:o,end:o+u.end};e.push(Yt.box(u.advanceWidth,g,p)),r[i+1]&&p&&e.push(Yt.penalty(5,a,1))}return o+=n.length,e},[]);return s.push(Yt.glue(0,null,Yt.infinity,0)),s.push(Yt.penalty(0,-Yt.infinity,1)),s},r.breakLines=function(t,e,r){var n=0,i=null,o=r.reduce(function(r,o){var a,s=e[o.position],h=e[o.position-1];return o.position===e.length-1?r:("penalty"===s.type?(i=t.glyphIndexForStringIndex(h.value.end),(a=t.copy().slice(n,i)).insertGlyph(a.length,45)):(i=t.glyphIndexForStringIndex(s.value.end),a=t.copy().slice(n,i)),n=i,[].concat(r,[a]))},[]),a=t.slice(n,t.glyphIndexForStringIndex(t.string.length));return o.push(a),o},r.suggestLineBreak=function(t,e,r,n){for(var i=this.getNodes(t,e,n),o=this.tolerance,a=Yt(i,r,{tolerance:o});0===a.length&&o<50;)a=Yt(i,r,{tolerance:o+=5});return(0===a.length||1===a.length&&0===a[0].position)&&(a=function(t,e){for(var r=0,n=0,i=t,o=[{position:0}];i.length>0;){var a=Jt(i,e,n);a?(r+=a,o.push({position:r}),i=i.slice(a+1,i.length),r++,n++):i=[]}return o}(i,r)),this.breakLines(t,i,a.slice(1))},t}()}},Qt={before:-.5,after:-.5},te=function(e){function r(t){var r=t.hyphenationCallback,n=t.hyphenationPenalty,i={scriptItemizer:A(),decorationEngine:B(),fontSubstitutionEngine:Ft(),wordHyphenation:Ht({hyphenationCallback:r}),lineBreaker:$t({penalty:n}),justificationEngine:L({shrinkWhitespaceFactor:Qt})};return e.call(this,i)||this}return t(r,e),r}(E);O.isValid=function(t){try{return!!new O(t)}catch(t){return!1}};var ee=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],re=function(t){if(this.data=null,this.width=null,this.height=null,this.data=t,65496!==t.readUInt16BE(0))throw new Error("SOI not found in JPEG");for(var e,r=2;r<t.length&&(e=t.readUInt16BE(r),r+=2,!ee.includes(e));)r+=t.readUInt16BE(r);if(!ee.includes(e))throw new Error("Invalid JPEG.");r+=3,this.height=t.readUInt16BE(r),r+=2,this.width=t.readUInt16BE(r)};re.isValid=function(t){if(!t||!Buffer.isBuffer(t)||65496!==t.readUInt16BE(0))return!1;for(var e,r=2;r<t.length&&(e=t.readUInt16BE(r),r+=2,!ee.includes(e));)r+=t.readUInt16BE(r);return!!ee.includes(e)};var ne,ie,oe,ae,se,he=(ie=(void 0===(ne={limit:30})?{}:ne).limit,oe=void 0===ie?100:ie,ae={},se=[],{get:function(t){return ae[t]},set:function(t,e){se.push(t),se.length>oe&&delete ae[se.shift()],ae[t]=e},reset:function(){ae={},se=[]},length:function(){return se.length}}),ue=function(){var t=a(o.mark(function t(e,r){var n,i;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,r);case 2:return n=t.sent,t.next=5,n.buffer?n.buffer():n.arrayBuffer();case 5:return i=t.sent,t.abrupt("return","Buffer"===i.constructor.name?i:Buffer.from(i));case 7:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}();function ce(t,e){switch(e.toLowerCase()){case"jpg":case"jpeg":return new re(t);case"png":return new O(t);default:return null}}var le=function(t){var e=function(t){var e;return re.isValid(t)?e="jpg":O.isValid(t)&&(e="png"),e}(t);if(e)return new Promise(function(r){return r(ce(t,e))})},de=function(t){var e=137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7],r=255===t[0]&&216===t[1]&&255===t[2],n="";if(e)n="png";else{if(!r)throw new Error("Not valid image extension");n="jpg"}return n},fe=function(){var t=a(o.mark(function t(e,r){var n,i,a,s,h,u,c;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.uri,i=e.body,a=e.headers,s=e.method,h=void 0===s?"GET":s,t.next=7;break;case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,ue(n,{body:i,headers:a,method:h});case 9:t.t0=t.sent;case 10:return u=t.t0,c=de(u),t.abrupt("return",ce(u,c));case 13:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}(),pe=function(t,r){var n,i,o=void 0===r?{}:r,a=o.cache,s=void 0===a||a,h=e(o,["cache"]),u=t.data?t.data.toString():t.uri;if(s&&he.get(u))return he.get(u);if(i=t.uri,!(n=/^data:image\/[a-zA-Z]*;base64,[^"]*/g.test(i)?function(t){var e=t.uri,r=/^data:image\/([a-zA-Z]*);base64,([^"]*)/g.exec(e),n=r[1],i=r[2];if(!function(t){var e=t.toLowerCase();return"jpg"===e||"jpeg"===e||"png"===e}(n))throw new Error("Base64 image invalid format: "+n);return new Promise(function(t){return t(ce(Buffer.from(i,"base64"),n))})}(t):Buffer.isBuffer(t)?le(t):"object"==typeof t&&t.data?function(t){if(t.data&&t.format)return new Promise(function(e){return e(ce(t.data,t.format))});throw new Error("Invalid data given for local file: "+JSON.stringify(t))}(t):fe(t,h)))throw new Error("Cannot resolve image");return s&&he.set(u,n),n},ge={},me=M(),ye=function(t){return"️"!==t},ve=function(t){var e,r=_t.getEmojiSource(),n=r.url,i=r.format;return""+n+(e=t,Array.from(e).filter(ye).map(function(t){return t.codePointAt(0).toString(16)}).join("-"))+"."+i},be=function(t){var e=_t.getEmojiSource();if(!e||!e.url)return[];for(var r,n=[],i=function(){var t,e=r[0];if(!ge[e]||ge[e].loading){var i=ve(e);ge[e]={loading:!0};var o=(t=pe,function(){return t.apply(void 0,arguments).then(function(t){return t},function(t){return t})});n.push(o({uri:i}).then(function(t){ge[e].loading=!1,ge[e].data=t.data}))}};r=me.exec(t);)i();return n},Te=[8232,8233],we=[function(t){return t.map(function(t){var e,r=(e=t.attributes.font,Te.reduce(function(t,r){return e.hasGlyphForCodePoint&&e.hasGlyphForCodePoint(r)?t:[].concat(t,[String.fromCharCode(r)])},[])),n=new RegExp(r.join("|"));return{string:t.string.replace(n,""),attributes:t.attributes}})},function(t){for(var e=[],n=0;n<t.length;n++){for(var i=t[n],o=void 0,a=0;o=me.exec(i.string);){var s=o.index,h=o[0],u=i.attributes.fontSize,c=i.string.slice(a,s+o[0].length);ge[h]&&ge[h].data?e.push({string:c.replace(o,k.CHARACTER),attributes:r({},i.attributes,{attachment:new k(u,u,{yOffset:Math.floor(.1*u),image:ge[h].data})})}):e.push({string:c.replace(o,String.fromCharCode(0)),attributes:i.attributes}),a=s+h.length}a<i.string.length&&e.push({string:i.string.slice(a),attributes:i.attributes})}return e}],xe=function(t){return C.fromFragments(function t(e){if(!e)return[{string:""}];var r=[],n=e.style,i=n.color,o=void 0===i?"black":i,a=n.backgroundColor,s=n.fontFamily,h=void 0===s?"Helvetica":s,u=n.fontSize,c=void 0===u?18:u,l=n.textAlign,d=void 0===l?"left":l,f=n.position,p=n.top,g=n.bottom,m=n.lineHeight,y=n.textDecoration,v=n.textDecorationColor,b=n.textDecorationStyle,T=n.textTransform,w=n.letterSpacing,x=n.opacity;e.children.forEach(function(n){if(null!==n.value&&void 0!==n.value){var i=_t.getFont(h),s=i?i.data:h,u=function(t,e){switch(e){case"uppercase":return t.toUpperCase();case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s)\S/g,function(t){return t.toUpperCase()});default:return t}}(n.value,T);r.push({string:u,attributes:{font:s,color:o,opacity:x,fontSize:c,backgroundColor:a,align:d,link:e.src,characterSpacing:w,underlineStyle:b,underline:"underline"===y,underlineColor:v||o,lineHeight:m?m*c:null,yOffset:"relative"===f?-p||g||0:null}})}else{var l;n&&(l=r).push.apply(l,t(n))}});for(var E=0;E<we.length;E++)r=(0,we[E])(r);return r}(t)).trim()},Ee={outlineLines:!1},ke=b({Rect:R}),Ce=function(e){function n(t,r){var n;return(n=e.call(this,t,r)||this).start=0,n.end=0,n.computed=!1,n.container=null,n.attributedString=null,n.layoutEngine=new te({hyphenationPenalty:r.hyphenationPenalty,hyphenationCallback:_t.getHyphenationCallback()}),n.layout.setMeasureFunc(n.measureText.bind(v(n))),n}t(n,e);var i=n.prototype;return i.appendChild=function(t){t&&(t.parent=this,this.children.push(t),this.computed=!1,this.attributedString=null,this.markDirty())},i.removeChild=function(t){var e=this.children.indexOf(t);-1!==e&&(t.parent=null,this.children.splice(e,1),this.computed=!1,this.attributedString=null,this.markDirty())},i.lineIndexAtHeight=function(t){for(var e=0,r=0;r<this.lines.length;r++){var n=this.lines[r];if(e+n.height>t)return r;e+=n.height}return this.lines.length},i.heightAtLineIndex=function(t){for(var e=0,r=0;r<t;r++){e+=this.lines[r].height}return e},i.layoutText=function(t,e){this.attributedString=xe(this);var r=e||this.page.size.height;if(!this.container||this.props.render){var n=(new S).rect(0,0,t,r),i=new P(n),o=this.attributedString;this.layoutEngine.layout(o,[i]),this.container=i}var a=this.container.blocks.reduce(function(t,e){return t+e.lines.length},0);this.end=this.props.maxLines||a+1,this.computed=!0},i.measureText=function(t,e,r,n){return e===d.MEASURE_MODE_EXACTLY?(this.layoutText(t),{height:this.style.flexGrow?NaN:this.linesHeight}):e===d.MEASURE_MODE_AT_MOST||n===d.MEASURE_MODE_AT_MOST?(this.layoutText(t,r),{height:this.linesHeight,width:Math.min(t,this.linesWidth)}):{}},i.resolveStyles=function(){var t=e.prototype.resolveStyles.call(this);return this.parent&&"Text"===this.parent.name&&"relative"===this.parent.style.position&&(t.top=t.top||this.parent.style.top,t.bottom=t.bottom||this.parent.style.bottom,t.position=t.position||"relative"),this.src&&(t.color=t.color||"blue",t.textDecoration=t.textDecoration||"underline"),t},i.wrapHeight=function(t){var e=this.props,r=e.orphans,n=e.widows,i=this.lines.length,o=t-this.paddingTop,a=this.lineIndexAtHeight(o);return i<r?t:a<r||i<r+n?0:i===r+n?this.heightAtLineIndex(r):i-a<n?t-this.heightAtLineIndex(n-1):t},i.onNodeSplit=function(t,e){var r=this.wrapHeight(t),n=this.lineIndexAtHeight(r);e.marginTop=0,e.paddingTop=0,e.start=n,e.attributedString=this.attributedString,this.height=r,this.marginBottom=0,this.paddingBottom=0,this.end=n},i.clone=function(){var t=e.prototype.clone.call(this);return t.layoutEngine=this.layoutEngine,this.container&&!this.props.render&&(t.container=this.container.copy()),t},i.render=function(){var t=a(o.mark(function t(){var e,n,i,a,s,h=this;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.root.instance.save(),this.applyTransformations(),this.drawBackgroundColor(),this.drawBorders(),this.computed||this.layoutText(this.width-this.padding.left-this.padding.right,this.height-this.padding.top-this.padding.bottom),e=this.getAbsoluteLayout(),n=e.top,i=e.left,a=this.lines[0]?this.lines[0].rect.y:0,this.lines.forEach(function(t){t.rect.x+=i+h.padding.left,t.rect.y+=n+h.padding.top-a}),s=r({},this.container,{blocks:[{lines:this.lines}]}),new ke(this.root.instance,Ee).render(s),this.props.debug&&this.debug(),this.root.instance.restore();case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),u(n,[{key:"name",get:function(){return"Text"}},{key:"src",get:function(){return zt(this.props.src||this.props.href)}},{key:"lines",get:function(){return this.container?this.container.blocks.reduce(function(t,e){return[].concat(t,e.lines)},[]).splice(this.start,this.end):[]}},{key:"linesHeight",get:function(){return this.container?this.lines.reduce(function(t,e){return t+e.height},0):-1}},{key:"linesWidth",get:function(){return this.container?Math.max.apply(Math,this.lines.map(function(t){return t.advanceWidth})):-1}}]),n}(wt);Ce.defaultProps={wrap:!0,widows:2,orphans:2};var Re=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.render=function(){var t=a(o.mark(function t(){var e,r,n,i,a;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getAbsoluteLayout(),r=e.top,n=e.left,i=e.width,a=e.height,this.root.instance.link(n,r,i,a,this.src),t.next=4,this.renderChildren();case 4:this.props.debug&&this.debug();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),u(r,[{key:"name",get:function(){return"Link"}},{key:"src",get:function(){return zt(this.props.src||this.props.href)}}]),r}(wt),Se=function(e){function r(){return e.apply(this,arguments)||this}t(r,e);var n=r.prototype;return n.appendChild=function(t){if("TextInstance"!==t.name)throw new Error("Note only accepts string children");t&&(t.parent=this,this.children.push(t))},n.removeChild=function(t){var e=this.children.indexOf(t);-1!==e&&(t.parent=null,this.children.splice(e,1))},n.applyProps=function(){e.prototype.applyProps.call(this),this.height=0,this.width=0},n.render=function(){var t=a(o.mark(function t(){var e,r,n,i;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.getAbsoluteLayout(),r=e.top,n=e.left,i=this.children[0]?this.children[0].value:"",this.root.instance.note(n,r,0,0,i);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),u(r,[{key:"name",get:function(){return"Note"}}]),r}(wt);Se.defaultProps={};var Pe=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},Ae=function(t,e,r,n,i,o){var a=t/e,s=r/n,h=z(i),u=z(o),c=h?h.percent:.5,l=u?u.percent:.5;if(a>s){var d=e,f=d*s,p=Pe(o)?o:0;return{width:f,height:d,xOffset:Pe(i)?i:(t-f)*c,yOffset:p}}var g=t,m=g/s,y=Pe(i)?i:0;return{width:g,height:m,yOffset:Pe(o)?o:(e-m)*l,xOffset:y}},Le=function(t,e,r,n,i,o){var a=r,s=n,h=z(i),u=z(o),c=h?h.percent:.5,l=u?u.percent:.5;return{width:a,height:s,xOffset:Pe(i)?i:(t-a)*c,yOffset:Pe(o)?o:(e-s)*l}},Be=function(t,e,r,n,i,o,a){switch(void 0===t&&(t="fill"),t){case"contain":return Ae(e,r,n,i,o,a);case"cover":return function(t,e,r,n,i,o){var a=r/n,s=t/e,h=z(i),u=z(o),c=h?h.percent:.5,l=u?u.percent:.5;if(s>a){var d=t,f=d/a,p=Pe(i)?i:0;return{width:d,height:f,yOffset:Pe(o)?o:(e-f)*l,xOffset:p}}var g=e*a;return{width:g,height:e,xOffset:Pe(i)?i:(t-g)*c,yOffset:Pe(o)?o:0}}(e,r,n,i,o,a);case"none":return Le(e,r,n,i,o,a);case"scale-down":return function(t,e,r,n,i,o){var a=Ae(t,e,r,n,i,o),s=Le(t,e,r,n,i,o);return a.width<s.width?a:s}(e,r,n,i,o,a);default:return function(t,e,r,n){return{width:t,height:e,xOffset:z(r)?0:r||0,yOffset:z(n)?0:n||0}}(e,r,o,a)}},Me=function(e){function r(t,r){var n;return(n=e.call(this,t,r)||this).image=null,n.layout.setMeasureFunc(n.measureImage.bind(v(n))),n}t(r,e);var n=r.prototype;return n.shouldGrow=function(){return!!this.style.flexGrow},n.measureImage=function(t,e,r,n){var i=this.margin,o=this.page.padding,a=this.page.size.height-o.top-o.bottom-i.top-i.bottom-10;if(!this.image)return{width:0,height:0};if(e===d.MEASURE_MODE_EXACTLY&&n===d.MEASURE_MODE_UNDEFINED){var s=t/this.ratio;return{height:Math.min(a,s)}}if(n===d.MEASURE_MODE_EXACTLY&&(e===d.MEASURE_MODE_AT_MOST||e===d.MEASURE_MODE_UNDEFINED))return{width:Math.min(r*this.ratio,t)};if(e===d.MEASURE_MODE_EXACTLY&&n===d.MEASURE_MODE_AT_MOST){var h=t/this.ratio;return{height:Math.min(r,a,h)}}return e===d.MEASURE_MODE_AT_MOST&&n===d.MEASURE_MODE_AT_MOST?this.ratio>1?{width:t,height:Math.min(t/this.ratio,r)}:{width:Math.min(r*this.ratio,t),height:r}:{height:r,width:t}},n.fetch=function(){var t=a(o.mark(function t(){var e,r,n,i;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,r=e.cache,n=e.safePath,i=e.allowDangerousPaths,this.src){t.next=4;break}return I(!1,'Image should receive either a "src" or "source" prop'),t.abrupt("return");case 4:return t.prev=4,t.next=7,pe(this.src,{cache:r,safePath:n,allowDangerousPaths:i});case 7:this.image=t.sent,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(4),this.image={width:0,height:0},console.warn(t.t0.message);case 14:case"end":return t.stop()}},t,this,[[4,10]])}));return function(){return t.apply(this,arguments)}}(),n.clone=function(){var t=e.prototype.clone.call(this);return t.image=this.image,t},n.onAppendDynamically=function(){var t=a(o.mark(function t(){return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),n.renderImage=function(){var t=this.padding,e=this.getAbsoluteLayout(),r=e.left,n=e.top,i=this.style,o=i.opacity,a=i.objectPositionX,s=i.objectPositionY;if(this.root.instance.save(),this.clip(),this.image.data){var h=Be(this.props.style.objectFit,this.width-t.left-t.right,this.height-t.top-t.bottom,this.image.width,this.image.height,a,s),u=h.width,c=h.height,l=h.xOffset,d=h.yOffset;0!==u&&0!==c?this.root.instance.fillOpacity(o).image(this.image.data,r+t.left+l,n+t.top+d,{width:u,height:c}):I(!1,"Image with src '"+this.props.src+"' skipped due to invalid dimensions")}this.root.instance.restore()},n.render=function(){var t=a(o.mark(function t(){return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.root.instance.save(),this.applyTransformations(),this.drawBackgroundColor(),this.renderImage(),this.drawBorders(),this.props.debug&&this.debug(),this.root.instance.restore();case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),u(r,[{key:"name",get:function(){return"Image"}},{key:"ratio",get:function(){return this.image.data?this.image.width/this.image.height:1}},{key:"src",get:function(){var t=this.props.src||this.props.source;return"string"==typeof t?{uri:t}:t}}]),r}(wt);Me.defaultProps={wrap:!1,cache:!0,style:{}};var Oe=function(){function t(t,e){this.root=t,this.style={},this.props=e,this.children=[],this.subpages=[]}var e=t.prototype;return e.appendChild=function(t){t.parent=this,this.children.push(t)},e.removeChild=function(t){var e=this.children.indexOf(t);t.parent=null,this.children.slice(e,1)},e.addMetaData=function(){var t=this.props,e=t.title,r=t.author,n=t.subject,i=t.keywords,o=t.creator,a=t.producer;e&&(this.root.instance.info.Title=e),r&&(this.root.instance.info.Author=r),n&&(this.root.instance.info.Subject=n),i&&(this.root.instance.info.Keywords=i),this.root.instance.info.Creator=o||"react-pdf",this.root.instance.info.Producer=a||"react-pdf"},e.loadFonts=function(){var t=a(o.mark(function t(){var e,r,n;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],r=this.children.slice(0);r.length>0;)(n=r.shift()).style&&n.style.fontFamily&&e.push(_t.load(n.style.fontFamily,this.root.instance)),n.children&&n.children.forEach(function(t){r.push(t)});return t.next=5,Promise.all(e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.loadEmojis=function(){var t=a(o.mark(function t(){var e,r,n;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],r=this.children.slice(0);r.length>0;)"string"==typeof(n=r.shift())?e.push.apply(e,be(n)):"string"==typeof n.value?e.push.apply(e,be(n.value)):n.children&&n.children.forEach(function(t){r.push(t)});return t.next=5,Promise.all(e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.loadImages=function(){var t=a(o.mark(function t(){var e,r,n;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],r=this.children.slice(0);r.length>0;)"Image"===(n=r.shift()).name&&e.push(n.fetch()),n.children&&n.children.forEach(function(t){r.push(t)});return t.next=5,Promise.all(e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.loadAssets=function(){var t=a(o.mark(function t(){return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.loadFonts(),this.loadImages()]);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.applyProps=function(){this.children.forEach(function(t){return t.applyProps()})},e.update=function(t){this.props=t},e.getLayoutData=function(){return{type:this.name,children:this.subpages.map(function(t){return t.getLayoutData()})}},e.wrapPages=function(){var t=a(o.mark(function t(){var e,r,n,i,a,s,h,u,c;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=1,r=[],n=this.children,i=Array.isArray(n),a=0,n=i?n:n[Symbol.iterator]();case 3:if(!i){t.next=9;break}if(!(a>=n.length)){t.next=6;break}return t.abrupt("break",27);case 6:s=n[a++],t.next=13;break;case 9:if(!(a=n.next()).done){t.next=12;break}return t.abrupt("break",27);case 12:s=a.value;case 13:if(u=(h=s).size.height-(h.style.paddingBottom||0),!h.wrap){t.next=23;break}return t.next=18,D(h,u,e);case 18:c=t.sent,e+=c.length,r.push.apply(r,c),t.next=25;break;case 23:h.height=h.size.height,r.push(h);case 25:t.next=3;break;case 27:return t.abrupt("return",r);case 28:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.renderPages=function(){var t=a(o.mark(function t(){var e;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.wrapPages();case 2:this.subpages=t.sent,e=0;case 4:if(!(e<this.subpages.length)){t.next=11;break}return this.subpages[e].renderDynamicNodes({pageNumber:e+1,totalPages:this.subpages.length},function(t){return"Text"===t.name}),t.next=8,this.subpages[e].render();case 8:e++,t.next=4;break;case 11:return t.abrupt("return",this.subpages);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),e.render=function(){var t=a(o.mark(function t(){return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.addMetaData(),this.applyProps(),t.next=5,this.loadEmojis();case 5:return t.next=7,this.loadAssets();case 7:return t.next=9,this.renderPages();case 9:this.root.instance.end(),_t.reset(),t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(0),t.t0;case 16:case"end":return t.stop()}},t,this,[[0,13]])}));return function(){return t.apply(this,arguments)}}(),u(t,[{key:"name",get:function(){return"Document"}}]),t}();Oe.defaultProps={author:null,keywords:null,subject:null,title:null};var De=["dash","clip","save","path","fill","font","text","rect","scale","moveTo","lineTo","stroke","rotate","circle","lineCap","opacity","ellipse","polygon","restore","lineJoin","fontSize","fillColor","lineWidth","translate","miterLimit","strokeColor","fillOpacity","roundedRect","strokeOpacity","bezierCurveTo","quadraticCurveTo","linearGradient","radialGradient"],Ie=function(t){var e=De.reduce(function(n,i){var o;return r({},n,((o={})[i]=function(){return t[i].apply(t,arguments),e},o))},{});return e},_e=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.render=function(){var t=a(o.mark(function t(){var e,r,n,i,a,s,h;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.getAbsoluteLayout(),r=e.left,n=e.top,i=e.width,a=e.height,s=i-this.paddingLeft-this.paddingRight,h=a-this.paddingTop-this.paddingBottom,I(s&&h,"Canvas element has null width or height. Please provide valid values via the `style` prop in order to correctly render it."),this.root.instance.save(),this.applyTransformations(),this.drawBackgroundColor(),this.drawBorders(),this.clip(),this.root.instance.translate(r+this.paddingLeft,n+this.paddingTop),this.props.paint&&this.props.paint(Ie(this.root.instance),s,h),this.root.instance.restore(),this.props.debug&&this.debug();case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),u(r,[{key:"name",get:function(){return"Canvas"}}]),r}(wt);_e.defaultProps={style:{},wrap:!1};var We={ROOT:_,PAGE:St,TEXT:Ce,LINK:Re,VIEW:Pt,NOTE:Se,IMAGE:Me,CANVAS:_e,DOCUMENT:Oe,TEXT_INSTANCE:Ct};function ze(t,e){var r=t.type,n=t.props,i=void 0===n?{}:n;if(We[r])return new We[r](e,i);throw new Error("Invalid element of type "+r+" passed to PDF renderer")}var Ne={},Fe=h({supportsMutation:!0,appendInitialChild:function(t,e){t.appendChild(e)},createInstance:function(t,e,r){return ze({type:function(t,e){return"LINK"===t&&("string"==typeof e.children||Array.isArray(e.children)||e.render)}(t,e)?"TEXT":t,props:e},r)},createTextInstance:function(t,e){return ze({type:"TEXT_INSTANCE",props:t},e)},finalizeInitialChildren:function(t,e,r){return!1},getPublicInstance:function(t){return t},prepareForCommit:function(){},prepareUpdate:function(t,e,r,n){return!function t(e,r){var n=Object.keys(e),i=Object.keys(r);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++){var a=n[o];if("render"!==a){if("children"!==a&&e[a]!==r[a]){if("object"==typeof e[a]&&"object"==typeof r[a]&&t(e[a],r[a]))continue;return!1}if("children"===a&&("string"==typeof e[a]||"string"==typeof r[a]))return e[a]===r[a]}else if(!e[a]!=!r[a])return!1}return!0}(r,n)},resetAfterCommit:function(){},resetTextContent:function(t){},getRootHostContext:function(){return Ne},getChildHostContext:function(){return Ne},shouldSetTextContent:function(t,e){return!1},now:Date.now,useSyncScheduling:!0,appendChild:function(t,e){t.appendChild(e)},appendChildToContainer:function(t,e){t.appendChild(e)},insertBefore:function(t,e,r){t.appendChildBefore(e,r)},removeChild:function(t,e){t.removeChild(e)},removeChildFromContainer:function(t,e){t.removeChild(e)},commitTextUpdate:function(t,e,r){t.update(r)},commitUpdate:function(t,e,r,n,i){t.update(i)}}),Ge="1.4.1",je="VIEW",Ue="TEXT",He="LINK",Ve="PAGE",Xe="NOTE",Ye="IMAGE",Je="CANVAS",qe=function(t){var e=ze({type:"ROOT"}),n=Fe.createContainer(e);function i(t){if(void 0===t&&(t={}),e.document.props.onRender){var n=e.document.getLayoutData();e.document.props.onRender(r({},t,{layoutData:n}))}}function h(t){Fe.updateContainer(t,n,null)}function u(){return(u=a(o.mark(function t(){var r;return o.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.render();case 2:return r=e.instance.pipe(s()),t.abrupt("return",new Promise(function(t,e){r.on("finish",function(){try{var n=r.toBlob("application/pdf");i({blob:n}),t(n)}catch(t){e(t)}}),r.on("error",e)}));case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}return t&&h(t),{isDirty:function(){return e.isDirty},updateContainer:h,toBuffer:function(){return i(),e.render(),e.instance},toBlob:function(){return u.apply(this,arguments)},toString:function(){var t="";return e.render(),new Promise(function(r,n){try{e.instance.on("data",function(e){t+=e}),e.instance.on("end",function(){i({string:t}),r(t)})}catch(t){n(t)}})}}},Ke=function(t){return t.reduce(function(t,e){return r({},t,e)},{})},Ze=function(t){var r=t.children,i=e(t,["children"]);return n.createElement("DOCUMENT",i,r)},$e=function(e){function r(t){var r;return(r=e.call(this,t)||this).state={blob:null,url:null,loading:!0,error:null},r.instance=qe(),r}t(r,e);var n=r.prototype;return n.componentDidMount=function(){this.renderDocument(),this.onDocumentUpdate()},n.componentDidUpdate=function(){this.renderDocument(),this.instance.isDirty()&&!this.state.error&&this.onDocumentUpdate()},n.renderDocument=function(){this.instance.updateContainer(this.props.document)},n.onDocumentUpdate=function(){var t=this,e=this.state.url;this.instance.toBlob().then(function(r){t.setState({blob:r,url:URL.createObjectURL(r),loading:!1},function(){return URL.revokeObjectURL(e)})}).catch(function(e){throw t.setState({error:e}),console.error(e),e})},n.render=function(){return this.props.children(this.state)},r}(n.PureComponent),Qe=function(t){var e=t.document,r=t.children;return e?n.createElement($e,{document:e},r):(I(!1,"You should pass a valid document to BlobProvider"),null)},tr=function(t){var i=t.className,o=t.style,a=t.children,s=t.innerRef,h=e(t,["className","style","children","innerRef"]);return n.createElement($e,{document:a},function(t){var e=t.url;return n.createElement("iframe",r({className:i,ref:s,src:e,style:Array.isArray(o)?Ke(o):o},h))})},er=function(t){var e=t.document,r=t.className,i=t.style,o=t.children,a=t.fileName,s=void 0===a?"document.pdf":a;if(!e)return I(!1,"You should pass a valid document to PDFDownloadLink"),null;return n.createElement($e,{document:e},function(t){return n.createElement("a",{className:r,download:s,href:t.url,onClick:(e=t.blob,function(){window.navigator.msSaveBlob&&window.navigator.msSaveBlob(e,s)}),style:Array.isArray(i)?Ke(i):i},"function"==typeof o?o(t):o);var e})};export default{pdf:qe,View:"VIEW",Text:"TEXT",Link:"LINK",Page:"PAGE",Font:_t,Note:"NOTE",Image:"IMAGE",Canvas:"CANVAS",version:"1.4.1",Document:Ze,PDFViewer:tr,StyleSheet:tt,PDFRenderer:Fe,BlobProvider:Qe,createInstance:ze,PDFDownloadLink:er};export{Ze as Document,Qe as BlobProvider,tr as PDFViewer,er as PDFDownloadLink,qe as pdf,je as View,Ue as Text,He as Link,Ve as Page,_t as Font,Xe as Note,Ye as Image,Je as Canvas,Ge as version,tt as StyleSheet,Fe as PDFRenderer,ze as createInstance};
//# sourceMappingURL=react-pdf.browser.es.min.js.map
