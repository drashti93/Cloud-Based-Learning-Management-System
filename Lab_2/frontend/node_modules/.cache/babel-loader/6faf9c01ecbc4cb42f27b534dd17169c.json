{"ast":null,"code":"import _classCallCheck from \"/Users/drashtithakkar/Documents/Semester_2/CMPE273/Canvas_Lab2/273_Canvas/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/drashtithakkar/Documents/Semester_2/CMPE273/Canvas_Lab2/273_Canvas/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/drashtithakkar/Documents/Semester_2/CMPE273/Canvas_Lab2/273_Canvas/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/drashtithakkar/Documents/Semester_2/CMPE273/Canvas_Lab2/273_Canvas/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/drashtithakkar/Documents/Semester_2/CMPE273/Canvas_Lab2/273_Canvas/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/drashtithakkar/Documents/Semester_2/CMPE273/Canvas_Lab2/273_Canvas/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/drashtithakkar/Documents/Semester_2/CMPE273/Canvas_Lab2/273_Canvas/frontend/src/components/message/message.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Sidebar from '../sidebar/sidebar';\nimport './message.css';\nimport * as actions from '../../actions/message';\nimport * as people_actions from '../../actions/people';\n\nvar Message =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Message, _Component);\n\n  function Message(props) {\n    var _this;\n\n    _classCallCheck(this, Message);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Message).call(this, props));\n    _this.state = {\n      messages: [],\n      show: false,\n      people: [],\n      selectedReceiver: \"Send To\",\n      selectedReceiverId: \"\",\n      message: \"\"\n    };\n    _this.changeReceiver = _this.changeReceiver.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Message, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(\"Course DID MOUNT\");\n      this.props.getAllMessages(this.props.user_id);\n      this.props.getAllPeople();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      console.log('Component WILL RECIEVE PROPS!');\n      console.log(newProps);\n      this.setState({\n        messages: newProps.all_messages,\n        people: newProps.all_people\n      });\n    }\n  }, {\n    key: \"changeReceiver\",\n    value: function changeReceiver(name, id) {\n      {\n        this.setState({\n          selectedReceiver: name,\n          selectedReceiverId: id\n        });\n      }\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        message_body: event.target.value\n      });\n    }\n  }, {\n    key: \"callModal\",\n    value: function callModal(mess) {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"col-sm-3 col-md-3 col-lg-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(Sidebar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-sm-9 col-md-9 col-lg-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        id: \"compose_button\",\n        \"data-toggle\": \"modal\",\n        \"data-target\": \"#exampleModal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, \"Compose\")), React.createElement(\"div\", {\n        className: \"container message_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, this.state.messages.map(function (message) {\n        return React.createElement(\"div\", {\n          className: \"message_details row\",\n          onClick: function onClick() {\n            return _this2.callModal(message.message);\n          },\n          \"data-toggle\": \"modal\",\n          \"data-target\": \"#exampleModalCenter\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-sm-3 col-md-3 col-lg-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, \"From: \", message.fromName, \" \", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }), \"To: \", message.toName), React.createElement(\"div\", {\n          className: \"col-sm-6 col-md-6 col-lg-6\",\n          id: \"message_text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, \"Message: \", message.message), React.createElement(\"div\", {\n          class: \"modal fade\",\n          id: \"exampleModalCenter\",\n          tabindex: \"-1\",\n          role: \"dialog\",\n          \"aria-labelledby\": \"exampleModalCenterTitle\",\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"modal-dialog modal-dialog-centered\",\n          role: \"document\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"modal-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"modal-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          class: \"modal-title\",\n          id: \"exampleModalLongTitle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, \"Message\"), React.createElement(\"button\", {\n          type: \"button\",\n          class: \"close\",\n          \"data-dismiss\": \"modal\",\n          \"aria-label\": \"Close\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, \"\\xD7\"))), React.createElement(\"div\", {\n          class: \"modal-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, message.message), React.createElement(\"div\", {\n          class: \"modal-footer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"button\",\n          class: \"btn btn-secondary\",\n          \"data-dismiss\": \"modal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, \"Close\")))))), React.createElement(\"div\", {\n          className: \"col-sm-3 col-md-3 col-lg-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, \"Time: \", message.timeStamp));\n      }))), React.createElement(\"div\", {\n        class: \"modal fade\",\n        id: \"exampleModal\",\n        tabindex: \"-1\",\n        role: \"dialog\",\n        \"aria-labelledby\": \"exampleModalLabel\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"modal-dialog\",\n        role: \"document\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"modal-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"modal-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        class: \"modal-title\",\n        id: \"exampleModalLabel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"New Message\"), React.createElement(\"button\", {\n        type: \"button\",\n        class: \"close\",\n        \"data-dismiss\": \"modal\",\n        \"aria-label\": \"Close\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"\\xD7\"))), React.createElement(\"div\", {\n        class: \"modal-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"dropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        class: \"btn btn-primary dropdown-toggle\",\n        type: \"button\",\n        \"data-toggle\": \"dropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, this.state.selectedReceiver, React.createElement(\"span\", {\n        class: \"caret\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })), React.createElement(\"ul\", {\n        class: \"dropdown-menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        class: \"form-control\",\n        id: \"myInput\",\n        type: \"text\",\n        placeholder: \"Search..\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), this.state.people.map(function (person) {\n        return React.createElement(\"li\", {\n          onClick: function onClick() {\n            return _this2.changeReceiver(person.name, person.user_id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, person.name);\n      }))), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Message: \"), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        class: \"form-control\",\n        id: \"message-text\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"modal-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-secondary\",\n        \"data-dismiss\": \"modal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Close\"), React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-primary\",\n        onClick: function onClick() {\n          return _this2.props.sendMessages(_this2.props.user_id, _this2.state.selectedReceiverId, _this2.state.message_body);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Send\"))))));\n    }\n  }]);\n\n  return Message;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    user_id: state.auth.user_id,\n    all_messages: state.message.all_messages,\n    all_people: state.people.all_people\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    getAllMessages: function getAllMessages(user_id) {\n      return dispatch(actions.getAllMessages(user_id));\n    },\n    getAllPeople: function getAllPeople() {\n      return dispatch(people_actions.getAllPeople());\n    },\n    sendMessages: function sendMessages(sender_user_id, receiver_user_id, message_body) {\n      return dispatch(actions.sendMessage(sender_user_id, receiver_user_id, message_body));\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Message);","map":{"version":3,"sources":["/Users/drashtithakkar/Documents/Semester_2/CMPE273/Canvas_Lab2/273_Canvas/frontend/src/components/message/message.js"],"names":["React","Component","connect","Sidebar","actions","people_actions","Message","props","state","messages","show","people","selectedReceiver","selectedReceiverId","message","changeReceiver","bind","handleChange","console","log","getAllMessages","user_id","getAllPeople","newProps","setState","all_messages","all_people","name","id","event","message_body","target","value","mess","map","callModal","fromName","toName","timeStamp","person","sendMessages","mapStateToProps","auth","mapDispatchToProps","dispatch","sender_user_id","receiver_user_id","sendMessage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {connect} from 'react-redux';\nimport Sidebar from '../sidebar/sidebar'\nimport './message.css'\nimport * as actions  from '../../actions/message'\nimport * as people_actions  from '../../actions/people'\n\nclass Message extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            messages: [],\n            show: false,\n            people: [],\n            selectedReceiver: \"Send To\",\n            selectedReceiverId: \"\",\n            message: \"\"\n        }\n        this.changeReceiver = this.changeReceiver.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n    }\n    \n    componentDidMount() {\n        console.log(\"Course DID MOUNT\")\n        this.props.getAllMessages(this.props.user_id);\n        this.props.getAllPeople();\n    }\n\n    componentWillReceiveProps(newProps) {    \n        console.log('Component WILL RECIEVE PROPS!')\n        console.log(newProps)\n        this.setState({\n            messages: newProps.all_messages,\n            people: newProps.all_people\n        })\n    }\n\n    changeReceiver(name, id){\n        {this.setState({selectedReceiver: name, selectedReceiverId: id})}\n    }\n\n    handleChange(event) {\n        this.setState({message_body: event.target.value});\n      }\n\n    callModal(mess){\n\n    }\n    render() {\n        \n        return (\n            <div>\n            <div class=\"col-sm-3 col-md-3 col-lg-3\">\n            <Sidebar/>\n            </div>\n            <div className=\"col-sm-9 col-md-9 col-lg-9\">\n                <div>\n                    <button className=\"btn btn-primary\" id=\"compose_button\" data-toggle=\"modal\" data-target=\"#exampleModal\">Compose</button>\n                </div>\n                <div className = \"container message_container\" >\n                    {this.state.messages.map(message => {\n                    return(\n                    <div className=\"message_details row\" onClick={() => this.callModal(message.message)} data-toggle=\"modal\" data-target=\"#exampleModalCenter\">\n                        <div className=\"col-sm-3 col-md-3 col-lg-3\">\n                            From: {message.fromName} <br/>\n                            To: {message.toName}\n                        </div>\n                        <div className=\"col-sm-6 col-md-6 col-lg-6\" id=\"message_text\">\n                            <p>Message: {message.message}</p>\n                            <div class=\"modal fade\" id=\"exampleModalCenter\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n                            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n                                <div class=\"modal-content\">\n                                <div class=\"modal-header\">\n                                    <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Message</h5>\n                                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                                    <span aria-hidden=\"true\">&times;</span>\n                                    </button>\n                                </div>\n                                <div class=\"modal-body\">\n                                    {message.message}\n                                </div>\n                                <div class=\"modal-footer\">\n                                    <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n                                </div>\n                                </div>\n                            </div>\n                        </div>\n                        </div>\n                        <div className=\"col-sm-3 col-md-3 col-lg-3\">\n                            Time: {message.timeStamp}\n                        </div>\n                        \n                    </div>\n                    )})}\n                </div>\n            </div>\n            \n            <div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n            <div class=\"modal-dialog\" role=\"document\">\n                <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\" id=\"exampleModalLabel\">New Message</h5>\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                    <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                </div>\n                <div class=\"modal-body\">\n                <div class=\"dropdown\">\n                    <button class=\"btn btn-primary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">{this.state.selectedReceiver}\n                    <span class=\"caret\"></span></button>\n                    <ul class=\"dropdown-menu\">\n                        <input class=\"form-control\" id=\"myInput\" type=\"text\" placeholder=\"Search..\"/>\n                        {this.state.people.map(person => {\n                            return(\n                            <li onClick={() => this.changeReceiver(person.name, person.user_id)}>{person.name}</li>\n                        )})}\n                    </ul>\n                </div>\n                    <label>Message: </label>\n                    <form><textarea class=\"form-control\" id=\"message-text\" onChange={this.handleChange}></textarea></form>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n                    <button type=\"button\" class=\"btn btn-primary\" onClick={() => this.props.sendMessages(this.props.user_id, this.state.selectedReceiverId, this.state.message_body)}>Send</button>\n                </div>\n                </div>\n            </div>\n            </div>\n            </div>\n        );\n        \n    }\n\n}\n\nfunction mapStateToProps(state) {\n    \n    return {\n        user_id: state.auth.user_id,\n        all_messages: state.message.all_messages,\n        all_people: state.people.all_people\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    \n    return {\n        getAllMessages : (user_id) => dispatch(actions.getAllMessages(user_id)),\n        getAllPeople: () => dispatch(people_actions.getAllPeople()),\n        sendMessages: (sender_user_id, receiver_user_id, message_body) => dispatch(actions.sendMessage(sender_user_id,receiver_user_id, message_body))\n       };\n}\nexport default connect(mapStateToProps,mapDispatchToProps)(Message);"]},"metadata":{},"sourceType":"module"}